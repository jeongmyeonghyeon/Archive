# Git ë„êµ¬

###7.3 Stashingê³¼ Cleaning

- `git stash`

	- ë¸Œëœì¹˜ë¥¼ ë³€ê²½í•´ì•¼ í•  ì¼ì´ ìƒê²¼ì„ ë•Œ, ì‘ì—…í•˜ë˜ ì¼ì„ ì»¤ë°‹í•˜ì§€ ì•Šê³  ë‚˜ì¤‘ì— ë‹¤ì‹œ ëŒì•„ì™€ì„œ ì‘ì—…ì„ ë‹¤ì‹œ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ (ì•„ì§ ëë‚´ì§€ ì•Šì€ ìˆ˜ì •ì‚¬í•­ì„ *ìŠ¤íƒ* ì— ì ì‹œ ì €ì¥í–ˆë‹¤ê°€ ë‚˜ì¤‘ì— ë‹¤ì‹œ ì ìš©í•  ìˆ˜ ìˆë‹¤.)
	- ì›Œí‚¹ ë””ë ‰í† ë¦¬ì—ì„œ ìˆ˜ì •í•œ íŒŒì¼ë“¤ë§Œ ì €ì¥í•œë‹¤.
	- StashëŠ” `Modifiedì´ë©´ì„œ Tracked ìƒíƒœì¸ íŒŒì¼`ê³¼ `Staging Areaì— ìˆëŠ” íŒŒì¼ë“¤`ì„ ë³´ê´€í•´ë‘ëŠ” ì¥ì†Œë‹¤.

		> stash  
		> 1. (ì•ˆì „í•œ ê³³ì—) ë„£ì–´ ë‘ë‹¤   2. ì±™ê²¨ ë‘” ì–‘
		
		```
		íŒŒì¼ ë‘ ê°œ ìˆ˜ì •, ê·¸ ì¤‘ í•˜ë‚˜ëŠ” Staging Areaì— ì¶”ê°€, ê·¸ë¦¬ê³  git status
		
		$ git status
		Changes to be committed:
		  (use "git reset HEAD <file>..." to unstage)
		
		    modified:   index.html
		
		Changes not staged for commit:
		  (use "git add <file>..." to update what will be committed)
		  (use "git checkout -- <file>..." to discard changes in working directory)

	    modified:   lib/simplegit.rb
	    ```
	    ```
	    ì‘ì—… ì¤‘ì¸ íŒŒì¼ Stash (git stash, git stash save)
	    
	    $ git stash
Saved working directory and index state \
		  "WIP on master: 049d078 added the index file"
		HEAD is now at 049d078 added the index file
		(To restore them type "git stash apply")
		
		ìƒˆë¡œìš´ Stashê°€ ë§Œë“¤ì–´ì¡ŒìŒ
	    ```
	    ```
	    ì›Œí‚¹ ë””ë ‰í† ë¦¬ëŠ” ê¹¨ë—í•´ì§ (modified:   index.html ê°€ ì—†ì–´ì§)
	    
	    $ git status
		# On branch master
		nothing to commit, working directory clean
	    ```
	    ```
	    git stash listë¡œ ì €ì¥í•œ Stash í™•ì¸
	    (ì–´ëŠ ë¸Œëœì¹˜ì—ë‚˜ í™•ì¸ ê°€ëŠ¥)
	    
	    $ git stash list
		stash@{0}: WIP on master: 049d078 added the index file
		stash@{1}: WIP on master: c264051 Revert "added file_size"
		stash@{2}: WIP on master: 21d80a5 added number to log
	    ```
	    ```
	    git stash apply ë¡œ Stashë¥¼ ë‹¤ì‹œ ì ìš©í•  ìˆ˜ ìˆë‹¤.
	    git stash apply stash@{2} ì²˜ëŸ¼ Stash ì´ë¦„ì„ ì…ë ¥í•´ ê³¨ë¼ ì ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¦„ì´ ì—†ìœ¼ë©´ ê°€ì¥ ìµœê·¼ì˜ Stashë¥¼ ì ìš©í•œë‹¤.
	    
	    $ git stash apply
		On branch master
		Changes not staged for commit:
		  (use "git add <file>..." to update what will be committed)
		  (use "git checkout -- <file>..." to discard changes in working directory)
		
		 modified:   index.html
		 modified:   lib/simplegit.rb
		
		no changes added to commit (use "git add" and/or "git commit -a")
		
		(modified:   index.html
		 modified:   lib/simplegit.rb
		 ê°€ ë‹¤ì‹œ ë‚˜ì˜´!!!)
	    ```
	- ì–´ë–¤ ë¸Œëœì¹˜ì—ì„œ Stash í•˜ê³  ë‹¤ë¥¸ ë¸Œëœì¹˜ë¡œ ì˜®ê¸°ê³ ì„œ ê±°ê¸°ì— Stashë¥¼ ë³µì›í•  ìˆ˜ ìˆë‹¤.
	- ê¼­ ì›Œí‚¹ ë””ë ‰í† ë¦¬ê°€ ê¹¨ë—í•œ ìƒíƒœì¼ í•„ìš”ë„ ì—†ë‹¤. ì›Œí‚¹ ë””ë ‰í† ë¦¬ì—ì„œ ìˆ˜ì •í•˜ê³  ì»¤ë°‹í•˜ì§€ ì•Šì€ íŒŒì¼ë“¤ì´ ìˆì„ ë•Œë„ Stashë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ ì¶©ëŒì´ ìˆìœ¼ë©´ ì•Œë ¤ì¤€ë‹¤.
	- `git stash apply` + `--index` ì˜µì…˜

		```
		Gitì€ Stashë¥¼ ì ìš©í•  ë•Œ Staged ìƒíƒœì˜€ë˜ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ë‹¤ì‹œ Staged ìƒíƒœë¡œ ë§Œë“¤ì–´ ì£¼ì§€ ì•ŠëŠ”ë‹¤.
		í•˜ì§€ë§Œ, git stash apply --index ë¥¼ ì‹¤í–‰í•˜ë©´ Staged ìƒíƒœê¹Œì§€ ì ìš©í•œë‹¤.
		
		$ git stash apply --index
		On branch master
		Changes to be committed:
		  (use "git reset HEAD <file>..." to unstage)
		
		 modified:   index.html
		
		Changes not staged for commit:
		  (use "git add <file>..." to update what will be committed)
		  (use "git checkout -- <file>..." to discard changes in working directory)
		
		 modified:   lib/simplegit.rb
		```
	- `git stash drop`

		- Stash ì œê±° ëª…ë ¹. apply ì˜µì…˜ì€ ë‹¨ìˆœíˆ Stash ì ìš©, StashëŠ” ì—¬ì „íˆ ìŠ¤íƒì— ë‚¨ì•„ ìˆìŒ

- Stashë¥¼ ë§Œë“œëŠ” ìƒˆë¡œìš´ ë°©ë²•

	- `git stash --keep-index` ğŸ˜³â—ï¸ ì´í•´ì•ˆê°!!!

		- ì´ë¯¸ Staging Areaì— ë“¤ì–´ ìˆëŠ” íŒŒì¼ì„ Stash í•˜ì§€ ì•ŠëŠ”ë‹¤.
		- ë§ì€ íŒŒì¼ì„ ë³€ê²½í–ˆì§€ë§Œ ëª‡ëª‡ íŒŒì¼ë§Œ ì»¤ë°‹í•˜ê³  ë‚˜ë¨¸ì§€ íŒŒì¼ì€ ë‚˜ì¤‘ì— ì²˜ë¦¬í•˜ê³  ì‹¶ì„ ë•Œ ìœ ìš© 

			```
			$ git status -s
			M  index.html
			 M lib/simplegit.rb
			
			$ git stash --keep-index
			Saved working directory and index state WIP on master: 1b65b17 added the index file
			HEAD is now at 1b65b17 added the index file
			
			$ git status -s
			M  index.html
			```

	- `git stash -u`

		- Untracked ë„ í•¨ê»˜ Stash

			```
			$ git status -s
			M  index.html
			 M lib/simplegit.rb
			?? new-file.txt
			
			$ git stash -u
			Saved working directory and index state WIP on master: 1b65b17 added the index file
			HEAD is now at 1b65b17 added the index file
			
			$ git status -s
			```
			
	- `git stash --patch`

		- ìˆ˜ì •ëœ ëª¨ë“  ì‚¬í•­ì„ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.
		- ëŒ€ì‹  ëŒ€í™”í˜• í”„ë¡¬í”„íŠ¸ê°€ ëœ¨ë©° *ë³€ê²½ëœ* ë°ì´í„° ì¤‘ *ì €ì¥í•  ê²ƒê³¼ ì €ì¥í•˜ì§€ ì•Šì„ ê²ƒì„ ì§€ì •* í•  ìˆ˜ ìˆë‹¤.

- **Stashë¥¼ ì ìš©í•œ ë¸Œëœì¹˜ ë§Œë“¤ê¸°**

	- `git stash branch`

		- ë¸Œëœì¹˜ë¥¼ ìƒˆë¡œ ë§Œë“¤ê³  Stashë¥¼ ë³µì›í•´ì£¼ëŠ” ë§¤ìš° í¸ë¦¬í•œ ë„êµ¬
		- Stashì— ì €ì¥í•˜ê³  ì¼ì„ í•˜ë‹¤ê°€ ì €ì¥í•œ Stashë¥¼ ì ìš©í•  ë•Œ, ì¶©ëŒë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•
		- Stash í•  ë‹¹ì‹œì˜ ì»¤ë°‹ì„ Checkout í•œ í›„ ìƒˆë¡œìš´ ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ê³  ì—¬ê¸°ì— ì ìš©í•œë‹¤. ì´ ëª¨ë“  ê²ƒì´ ì„±ê³µí•˜ë©´ Stashë¥¼ ì‚­ì œí•œë‹¤.

- ì›Œí‚¹ ë””ë ‰í† ë¦¬ ì²­ì†Œí•˜ê¸°

	- `git clean` + `-f -d`

		- ì‘ì—…í•˜ê³  ìˆë˜ íŒŒì¼ì„ Stash í•˜ì§€ ì•Šê³  ë‹¨ìˆœíˆ ê·¸ íŒŒì¼ë“¤ì„ ì¹˜ì›Œë²„ë¦´ ë•Œ ì‚¬ìš©
		- ìœ„í—˜í•œ ëª…ë ¹ì–´...
			- `git stash -all` ê¶Œì¥
			- `-n`
				- Would reemove [file] ì´ ì¶œë ¥ë˜ì–´ ì§€ìš¸ íŒŒì¼ë“¤ì„ ë¯¸ë¦¬ ë³´ì—¬ì¤Œ
			- `-i` : ëŒ€í™”í˜• ì˜µì…˜
		- `git clean`
			- *ì¶”ì ì¤‘ì´ì§€ ì•Šì€ íŒŒì¼* ë§Œ ì§€ìš°ëŠ” ê²Œ ê¸°ë³¸ ë™ì‘
			- `.gitignore`ì— ëª…ì‹œí–ˆê±°ë‚˜ í•´ì„œ ë¬´ì‹œë˜ëŠ” íŒŒì¼ì€ ì§€ìš°ì§€ ì•ŠëŠ”ë‹¤. (ë¬´ì‹œëœ íŒŒì¼ê¹Œì§€ í•¨ê»˜ ì§€ìš°ë ¤ë©´ `-x` ì˜µì…˜)
			- `.o`íŒŒì¼ ê°™ì€ ë¹Œë“œ íŒŒì¼ê¹Œì§€ë„ ì§€ìš¸ ìˆ˜ ìˆë‹¤.
		- `-f -d` : í•˜ìœ„ ë””ë ‰í† ë¦¬ê¹Œì§€ ëª¨ë‘ ì§€ì›Œë²„ë¦¼
			- `-f` : ê°•ì œ(force)

		```
		$ git status -s
		 M lib/simplegit.rb
		?? build.TMP
		?? tmp/
		
		$ git clean -n -d
		Would remove build.TMP
		Would remove tmp/
		
		$ git clean -n -d -x
		Would remove build.TMP
		Would remove test.o
		Would remove tmp/
		```

###7.5 ê²€ìƒ‰

- `git grep` + `-n` + [ëŒ€ìƒ]

	- Git íˆìŠ¤í† ë¦¬ ë‚´ì˜ ì–´ë– í•œ ì •ë³´ë¼ë„ ë§¤ìš° ë¹ ë¥´ê²Œ ì°¾ì•„ë‚¼ ìˆ˜ ìˆë‹¤. (ì´ì „ ë²„ì „ì˜ ì†ŒìŠ¤ì—ì„œë„ ê°€ëŠ¥)
	- ëŒ€ìƒì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ì›Œí‚¹ ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ì—ì„œ ì°¾ëŠ”ë‹¤. 
	- `-n` : ì°¾ì„ ë¬¸ìì—´ì´ ìœ„ì¹˜í•œ ë¼ì¸ ë²ˆí˜¸ë„ ê°™ì´ ì¶œë ¥
	- `--count` : íŒŒì¼ì´ ëª‡ê°œ?
	- `-p` : í•¨ìˆ˜ë‚˜ ë©”ì„œë“œ ê²€ìƒ‰
	- `--and` : ì—¬ëŸ¬ ë‹¨ì–´ê°€ í•œë¼ì¸ì— ë™ì‹œì— ë‚˜íƒ€ë‚˜ëŠ” ì¤„ ì°¾ê¸° ê°™ì€ ë³µì¡í•œ ì¡°í•©ì˜ ê²€ìƒ‰ (`--break`ì™€ `--heading` ì˜µì…˜ì„ ë¶™ì—¬ ë” ì½ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ì˜ë¼ì„œ ì¶œë ¥í•  ìˆ˜ë„ ìˆë‹¤.)

		```
		$ git grep --break --heading \
	    -n -e '#define' --and \( -e LINK -e BUF_MAX \) v1.8.0
		v1.8.0:builtin/index-pack.c
		62:#define FLAG_LINK (1u<<20)
		
		v1.8.0:cache.h
		73:#define S_IFGITLINK  0160000
		74:#define S_ISGITLINK(m)       (((m) & S_IFMT) == S_IFGITLINK)
		
		v1.8.0:environment.c
		54:#define OBJECT_CREATION_MODE OBJECT_CREATION_USES_HARDLINKS
		
		v1.8.0:strbuf.c
		326:#define STRBUF_MAXLINK (2*PATH_MAX)
		
		v1.8.0:symlinks.c
		53:#define FL_SYMLINK  (1 << 2)
		
		v1.8.0:zlib.c
		30:/* #define ZLIB_BUF_MAX ((uInt)-1) */
		31:#define ZLIB_BUF_MAX ((uInt) 1024 * 1024 * 1024) /* 1GB */
			```

- `git log`


###7.6 íˆìŠ¤í† ë¦¬ ë‹¨ì¥í•˜ê¸°

- ë§ˆì§€ë§‰ ì»¤ë°‹ì„ ìˆ˜ì •í•˜ê¸°

	- `git commit --amend`

		- ìë™ìœ¼ë¡œ í…ìŠ¤íŠ¸ í¸ì§‘ê¸°ë¥¼ ì‹¤í–‰ì‹œì¼œì„œ ë§ˆì§€ë§‰ ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ì—´ì–´ì¤€ë‹¤.

â—ï¸â—ï¸â—ï¸[ì£¼ë§ì— ë‚´ìš© ì¶”ê°€]â—ï¸â—ï¸â—ï¸

###7.7 Reset ëª…í™•íˆ ì•Œê³  ê°€ê¸°

- ì„¸ ê°œì˜ íŠ¸ë¦¬

	- ì—¬ê¸°ì„œì˜ íŠ¸ë¦¬ëŠ” ìë£Œêµ¬ì¡°ì˜ íŠ¸ë¦¬ê°€ ì•„ë‹ˆë¼ "íŒŒì¼ì˜ ë¬¶ìŒ"ì„ ì˜ë¯¸í•œë‹¤.
	- ë˜, ì„¸ íŠ¸ë¦¬ ì¤‘ IndexëŠ” íŠ¸ë¦¬ë„ ì•„ë‹ˆì§€ë§Œ, ì´í•´ë¥¼ ì‰½ê²Œ í•˜ê¸°ìœ„í•´ ì¼ë‹¨ íŠ¸ë¦¬ë¼ê³  ê°€ì •

| íŠ¸ë¦¬          | ì—­í•                                       |
|---------------|-------------------------------------------|
| HEAD          | ë§ˆì§€ë§‰ ì»¤ë°‹ ìŠ¤ëƒ…ìƒ·, ë‹¤ìŒ ì»¤ë°‹ì˜ ë¶€ëª¨ ì»¤ë°‹ |
| Index(Staging Area)         | ë‹¤ìŒì— ì»¤ë°‹í•  ìŠ¤ëƒ…ìƒ·                      |
| ì›Œí‚¹ ë””ë ‰í† ë¦¬ | ìƒŒë“œë°•ìŠ¤                                  |

- ì›Œí‚¹ ë””ë ‰í† ë¦¬ íŒŒì¼ ìˆ˜ì •: ì›Œí‚¹ ë””ë ‰í† ë¦¬ì™€ Index ê°€ ë‹¤ë¥¸ ë‚´ìš©ì„ ë‹´ê³  ìˆì„ ë•Œ  <span style="color:red">(â€œChanges not staged for commit,â€) ë¹¨ê°„ìƒ‰</span>
- `git add` : Indexì™€ HEADì˜ ë‹¤ë¥¸ íŒŒì¼ë“¤<span style="color:green">(â€œChanges to be committedâ€) ì´ˆë¡ìƒ‰</span>
- `git commit` : ì„¸ ê°œì˜ íŠ¸ë¦¬ì˜ ë‚´ìš©ì´ ê°™ì•„ì¡Œë‹¤. ì•„ë¬´ê²ƒë„ í‘œì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤.

- Resetëª…ë ¹ ê¸°ë³¸ í˜•íƒœ  
	> reset ëª…ë ¹ì€ ì •í•´ì§„ ìˆœì„œëŒ€ë¡œ ì„¸ ê°œì˜ íŠ¸ë¦¬ë¥¼ ë®ì–´ì¨ ë‚˜ê°€ë‹¤ê°€ ì˜µì…˜ì— ë”°ë¼ ì§€ì •í•œ ê³³ì—ì„œ ë©ˆì¶˜ë‹¤.
	
	- HEADê°€ ê°€ë¦¬í‚¤ëŠ” ë¸Œëœì¹˜ë¥¼ ì˜®ê¸´ë‹¤. (--soft ì˜µì…˜ì´ ë¶™ìœ¼ë©´ ì—¬ê¸°ê¹Œì§€)
	
	- Indexë¥¼ HEADê°€ ê°€ë¦¬í‚¤ëŠ” ìƒíƒœë¡œ ë§Œë“ ë‹¤. (--hard ì˜µì…˜ì´ ë¶™ì§€ ì•Šì•˜ìœ¼ë©´ ì—¬ê¸°ê¹Œì§€)

	- ì›Œí‚¹ ë””ë ‰í† ë¦¬ë¥¼ Indexì˜ ìƒíƒœë¡œ ë§Œë“ ë‹¤.

		[ë‚˜ë¨¸ì§„... ê·¸ë¦¼ì„¤ëª… ğŸ¤¡](https://git-scm.com/book/ko/v2/Git-%EB%8F%84%EA%B5%AC-Reset-%EB%AA%85%ED%99%95%ED%9E%88-%EC%95%8C%EA%B3%A0-%EA%B0%80%EA%B8%B0)

- Squash(í•©ì¹˜ê¸°) [ê·¸ë¦¼]()
- Checkout [ê·¸ë¦¼]()
- ì–´ë–¤ ëª…ë ¹ì´ ì–´ë–¤ íŠ¸ë¦¬ì— ì˜í–¥ì„ ì£¼ëŠ”ì§€ì— ëŒ€í•œ ìš”ì•½í‘œ

|                          | HEAD | INDEX | Workdir | WD safe? |
|--------------------------|------|-------|---------|----------|
| Commit Level             |      |       |         |          |
| reset --soft [commit]    | REF  | NO    | NO      | YES      |
| reset [commit]           | REF  | YES   | NO      | YES      |
| reset --hard [commit]    | REF  | YES   | YES     | **NO**       |
| checkout [commit]        | HEAD | YES   | YES     | YES      |
| File Level               |      |       |         |          |
| reset (commit) [file]    | NO   | YES   | NO      | YES      |
| checkout (commit) [file] | NO   | YES   | YES     | **NO**       |

- REF : HEADê°€ ê°€ë¦¬í‚¤ëŠ” ë¸Œëœì¹˜ë¥¼ ì›€ì§ì¸ë‹¤
- HEAD : HEAD ìì²´ê°€ ì›€ì§ì¸ë‹¤
- WD Safe? ì˜ **NO** : ì›Œí‚¹ ë””ë ‰í† ë¦¬ì— ì €ì¥í•˜ì§€ ì•Šì€ ë‚´ìš©ì´ ì•ˆì „í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í•´ë‹¹ ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ì£¼ì˜ìš”ë§ !!!